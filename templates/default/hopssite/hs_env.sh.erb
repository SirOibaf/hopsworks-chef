#!/bin/bash

# Copyright (C) 2014 - 2018 Logical Clocks AB. All rights reserved.
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

export INSTALL_PATH='/srv/hops'

export HOPSSITE_AUX="${INSTALL_PATH}/hopssite"
export HOPS_SITE_TABLES="${HOPSSITE_AUX}/hs_tables.sql"
export HOPS_SITE_ROWS="${HOPSSITE_AUX}/hs_rows.sql"

export HOPS_SITE_BASE="${INSTALL_PATH}/hops-site"
export GLASSFISH_PATH='/srv/hops/glassfish/versions/current'
export DOMAIN_DIR='/srv/hops/domains'
export DOMAIN='domain2'
export DOMAINPW_FILE="${DOMAIN_DIR}/master-password"
export CERTS_DIR='/srv/hops/certs-dir'
export MYSQL_SERVER='10.0.2.15'
export MYSQL_PORT='3306'
export DB_NAME='hops_site'
export MYSQL_DIR='/srv/hops/mysql-cluster/ndb/scripts/'
export MSQL_CONNECTOR='mysql-connector-java-5.1.29-bin.jar'
export HOPS_SITE_WAR="${HOPS_SITE_BASE}/lib/hops-site.war"
export HOPS_SITE_DOWNLOAD_URL="http://snurran.sics.se/hops/hops-site.war"
export ASADMIN_PW="--user adminuser --passwordfile ${DOMAINPW_FILE}"
export KEYSTOREPW="adminpw"
export KEYSTORE_PASSWORD="-srcstorepass $KEYSTOREPW -deststorepass $KEYSTOREPW -destkeypass $KEYSTOREPW"
export KEY_PASSWORD="-keypass $KEYSTOREPW -storepass $KEYSTOREPW"
export ADMIN_CERT_ALIAS="hops.site-admin"
export DOMAIN_BASE_PORT=50000
export ADMIN_PORT=`expr $DOMAIN_BASE_PORT + 48` # HTTPS listener port: portbase + 81

export MYSQL_USER="<%= node['ndb']['user'] %>"
export GLASSFISH_USER="<%= node['hopsworks']['user'] %>"
export CERTS_GROUP="<%= node['hopsworks']['user'] %>"
export KAGENT_USER="<%= node['kagent']['user'] %>"
